{% include 'base.html' %}

{% block content %}
<section class="container-fluid" id="dashboard-cover">

    <div class="text-center">
        <h4> Welcome {{user}}</h4>
    </div>
    <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3">
        <div class="card col shadow bg-primary ">
            <div class="card-body ">
                <h5 class="card-title">Open Tickets</h5>
                <p class="card-text"> {{ open_tickets }} </p>
            </div>
        </div>

        <div class="card col shadow bg-danger">
            <div class="card-body ">
                <h5 class="card-title">In Progress Tickets</h5>
                <p class="card-text">{{ inprogress_tickets }}</p>
            </div>
        </div>

        <div class="card col shadow bg-success">
            <div class="card-body ">
                <h5 class="card-title">Closed Tickets</h5>
                <p class="card-text">{{ closed_tickets }}</p>
            </div>
        </div>
    </div>

    {% if lastest_tickets%}
    <table class="table table-hover">
        <thead class="thead-light">
            <tr class="text-center text-capitalize">
                <th scope=col>Title</th>
                <th scope=col>Status</th>
                <th scope=col>Priority</th>
                <th scope=col>Assigned to</th>
                <th scope=col>Created</th>
            </tr>
            
        </thead>

        <tbody>
            {% for ticket in lastest_tickets %}
            <tr class="text-center">
                <td><a href="" class="text-decoration-none">{{ ticket.title }}</a></td>
                <td><span class="badge bg-info text-white">{{ ticket.status }}</span></td>
                <td><span class="badge bg-danger text-white">{{ ticket.priority }}</span></td>
                <td>{{ ticket.assigned_to }}</td>
                <td>{{ ticket.created_date }}</td>
            </tr>
            {% endfor %}
            
        </tbody>
    </table>

    <a href="" class="btn btn-secondary mt-3">Create Ticket</a>

    {% endif %}
    
</section>
{% endblock %}

{% block extra_js %}

{% endblock %}